# ダウンロード後ガイド機能 - 詳細仕様

**作成日:** 2026-02-12
**バージョン:** 1.0
**ステータス:** ✅ 実装完了（Phase 4.1）

---

## 📋 概要

ZIPファイルダウンロード後に表示される、OBS手動設定ガイド機能の詳細仕様。
basic.ini/service.jsonでは設定できない項目を、初心者向けに画像（またはテキスト）付きで案内する。

---

## 🎯 目的

1. **初心者の離脱を防ぐ**
   - 設定ファイルをダウンロードしても、手動設定が必要なことを知らずに離脱するのを防ぐ

2. **必須設定の漏れを防ぐ**
   - YouTube配信キー、マイク、ゲームキャプチャなど、必ず設定が必要な項目を明示

3. **パフォーマンス最適化を支援**
   - 初心者でもワンクリックで選択できるよう、影響度を明示したチェックボックス形式

---

## 📊 設定項目一覧（10項目）

### ✅ 必須設定（3項目）

| No | 項目名 | 必須度 | 影響度 | カテゴリ |
|----|--------|--------|--------|----------|
| 1 | YouTube配信キーの設定 | ★★★★★ | - | 必須 |
| 2 | マイク音声の設定 | ★★★★★ | 🟢 小 | 必須 |
| 3 | ゲームキャプチャの追加 | ★★★★★ | 🟡 中 | 必須 |

### ⚡ パフォーマンス設定（影響度: 大）（3項目）

| No | 項目名 | 必須度 | 影響度 | 効果 |
|----|--------|--------|--------|------|
| 4 | プレビュー画面の無効化 | ★★☆☆☆ | 🔴 大 | CPU -10-15% |
| 5 | プロセス優先度の設定 | ★★★☆☆ | 🔴 大 | コマ落ち防止 |
| 6 | 自動録画の無効化 | ★★☆☆☆ | 🔴 大 | ディスク負荷削減 |

### 🔧 その他の最適化（4項目）

| No | 項目名 | 必須度 | 影響度 | カテゴリ |
|----|--------|--------|--------|----------|
| 7 | 出力モードの確認 | ★★★☆☆ | 🟡 中 | 任意 |
| 8 | Windowsゲームモード | ★★★☆☆ | 🟡 中 | 任意 |
| 9 | ブラウザHWアクセラ | ★☆☆☆☆ | 🟢 小 | 任意 |
| 10 | 音声モニタリング | ★★★☆☆ | 🟢 小 | 任意 |

---

## 🎨 UI設計

### Phase 1: 完了画面の拡張

**現在:**
```
┌─────────────────────────┐
│ 🎉 完成しました！        │
├─────────────────────────┤
│ OBS設定ファイルを        │
│ ダウンロードしました     │
│                         │
│ [最初に戻る]             │
└─────────────────────────┘
```

**新設計:**
```
┌─────────────────────────────────────┐
│ 🎉 設定ファイルのダウンロード完了！   │
├─────────────────────────────────────┤
│ 次のステップ: OBSで手動設定          │
│                                     │
│ [📥 ZIPファイルのインポート方法を見る] │
│ [⚙️ 必須設定ガイドを見る]             │
│ [最初に戻る]                         │
└─────────────────────────────────────┘
```

### Phase 2: 必須設定ガイド画面

```
┌─────────────────────────────────────┐
│ ✅ 必須設定（配信前に必ず設定）       │
│                                     │
│ 以下の3つは必ず設定してください       │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│ 1️⃣ YouTube配信キーの設定             │
│                                     │
│ [📸 画像を表示] or [📝 手順を表示]    │
│                                     │
│ 【手順テキスト】                     │
│ 1. YouTube Studioを開く              │
│ 2. 「ライブ配信」→「ストリームキー」  │
│    をコピー                          │
│ 3. OBS > 設定 > 配信 > ストリーム     │
│    キーに貼り付け                    │
│                                     │
│ [✅ 設定完了]                        │
└─────────────────────────────────────┘

（2, 3も同様）

┌─────────────────────────────────────┐
│ [次へ: パフォーマンス設定]             │
└─────────────────────────────────────┘
```

### Phase 3: パフォーマンス設定ガイド画面

```
┌─────────────────────────────────────┐
│ ⚡ パフォーマンス最適化（推奨）        │
│                                     │
│ 配信を快適にするための設定です        │
│ 必要なものだけ選んでください          │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│ ☑️ プレビュー画面を無効化             │
│ 影響度: 🔴 大（CPU使用率 -10-15%）   │
│                                     │
│ 【説明】                             │
│ 配信中はプレビューを見ないので        │
│ 無効化してCPU負荷を減らします         │
│                                     │
│ [📸 画像を表示] or [📝 手順を表示]    │
│                                     │
│ 【手順テキスト】                     │
│ 1. OBSのプレビュー画面を右クリック    │
│ 2. 「プレビューを有効化」のチェックを │
│    外す                             │
└─────────────────────────────────────┘

（5, 6も同様）

┌─────────────────────────────────────┐
│ [詳細設定を見る] [スキップして完了]    │
└─────────────────────────────────────┘
```

### Phase 4: 詳細設定ガイド画面

```
┌─────────────────────────────────────┐
│ 🔧 その他の最適化設定（任意）         │
│                                     │
│ より詳細な設定です（スキップ可）      │
└─────────────────────────────────────┘

（項目7-10を同様のフォーマットで表示）

┌─────────────────────────────────────┐
│ [完了]                               │
└─────────────────────────────────────┘
```

---

## 📐 データ構造

### 設定項目の型定義

```typescript
/**
 * ガイド項目のカテゴリ
 */
export type GuideCategory = 'required' | 'performance-high' | 'performance-mid' | 'optional';

/**
 * パフォーマンス影響度
 */
export type PerformanceImpact = 'high' | 'medium' | 'low' | 'none';

/**
 * ガイド項目の詳細
 */
export interface GuideItem {
  id: string;
  title: string;
  category: GuideCategory;
  priority: number; // 1-5 (5が最重要)
  impact: PerformanceImpact;
  impactDescription?: string; // 例: "CPU -10-15%"
  description: string;
  steps: string[]; // 手順のリスト
  imageUrl?: string; // 画像URL（将来実装）
  imagePlaceholder?: string; // 画像の代替テキスト（ASCII図など）
  estimatedTime?: number; // 設定にかかる推定時間（秒）
  completed?: boolean; // ユーザーが完了マークを付けたか
}

/**
 * ガイド進捗状態
 */
export interface GuideProgress {
  requiredCompleted: number; // 必須設定の完了数
  performanceSelected: string[]; // 選択されたパフォーマンス設定のID
  optionalCompleted: number; // 任意設定の完了数
  currentStep: 'required' | 'performance' | 'optional' | 'complete';
}
```

### 設定項目のデータ

```typescript
export const guideItems: GuideItem[] = [
  // === 必須設定 ===
  {
    id: 'youtube-stream-key',
    title: 'YouTube配信キーの設定',
    category: 'required',
    priority: 5,
    impact: 'none',
    description: 'YouTube Liveの配信キーを設定しないと配信を開始できません。',
    steps: [
      'YouTube Studioを開く（https://studio.youtube.com）',
      '左メニューから「ライブ配信」をクリック',
      '「ストリームキー」をコピー',
      'OBS > 設定 > 配信 > 「ストリームキー」に貼り付け',
      '「OK」をクリック',
    ],
    estimatedTime: 120,
    imagePlaceholder: `
┌─────────────────────┐
│ YouTube Studio      │
├─────────────────────┤
│ [ライブ配信]         │
│   ├─ ストリームキー  │ ← ここをコピー
│   └─ 設定           │
└─────────────────────┘
    `,
  },
  {
    id: 'microphone-setup',
    title: 'マイク音声の設定',
    category: 'required',
    priority: 5,
    impact: 'low',
    impactDescription: 'CPU +1-2%',
    description: 'マイクを設定しないと視聴者に声が届きません。',
    steps: [
      'OBS > 設定 > 音声',
      '「マイク音声」でデバイスを選択',
      '「OK」をクリック',
      'OBSメイン画面の音声ミキサーでレベルを確認',
      '声を出してメーターが動くことを確認',
    ],
    estimatedTime: 60,
    imagePlaceholder: `
┌─────────────────────┐
│ 音声設定            │
├─────────────────────┤
│ マイク音声:         │
│ [デバイスを選択▼]   │ ← マイクを選択
│                     │
│ デスクトップ音声:   │
│ [既定]              │
└─────────────────────┘
    `,
  },
  {
    id: 'game-capture',
    title: 'ゲーム画面のキャプチャ設定',
    category: 'required',
    priority: 5,
    impact: 'medium',
    impactDescription: 'キャプチャ方式でCPU 5-15%差',
    description: '配信する画面（ゲーム画面）をキャプチャする設定です。',
    steps: [
      'OBSのシーンパネルで「+」をクリック',
      '「ゲーム配信」などの名前を入力してOK',
      'ソースパネルで「+」をクリック',
      '「ゲームキャプチャ」を選択',
      'モードを「特定のウィンドウをキャプチャ」に設定（推奨）',
      'ゲームを起動してウィンドウを選択',
      '「OK」をクリック',
    ],
    estimatedTime: 180,
    imagePlaceholder: `
┌─────────────────────┐
│ ゲームキャプチャ    │
├─────────────────────┤
│ モード:             │
│ ⦿ 特定のウィンドウ  │ ← 推奨
│ ○ フルスクリーン    │
│                     │
│ ウィンドウ:         │
│ [ゲーム名.exe▼]     │
└─────────────────────┘
    `,
  },

  // === パフォーマンス設定（影響度: 大） ===
  {
    id: 'disable-preview',
    title: 'プレビュー画面の無効化',
    category: 'performance-high',
    priority: 3,
    impact: 'high',
    impactDescription: 'CPU -10-15%',
    description: '配信中はプレビューを見ないので、無効化してCPU負荷を減らします。',
    steps: [
      'OBSのプレビュー画面を右クリック',
      '「プレビューを有効化」のチェックを外す',
    ],
    estimatedTime: 10,
    imagePlaceholder: `
┌─────────────────────┐
│ プレビュー画面      │ ← 右クリック
├─────────────────────┤
│ ✓ プレビューを有効化 │ ← チェックを外す
│   全画面プロジェクタ │
│   スタジオモード     │
└─────────────────────┘
    `,
  },
  {
    id: 'process-priority',
    title: 'プロセス優先度の設定',
    category: 'performance-high',
    priority: 4,
    impact: 'high',
    impactDescription: 'コマ落ち・音ズレ防止',
    description: 'OBSの優先度を上げて、コマ落ちや音ズレを防ぎます。',
    steps: [
      'OBS > 設定 > 詳細設定',
      '「プロセス優先度」を「高」に設定',
      '「OK」をクリック',
    ],
    estimatedTime: 30,
    imagePlaceholder: `
┌─────────────────────┐
│ 詳細設定            │
├─────────────────────┤
│ プロセス優先度:     │
│ [高▼]              │ ← 「高」に設定
│                     │
│ ⚠️ 注意: PCの動作が │
│   重くなることがあり │
│   ます              │
└─────────────────────┘
    `,
  },
  {
    id: 'disable-recording',
    title: '自動録画の無効化',
    category: 'performance-high',
    priority: 2,
    impact: 'high',
    impactDescription: 'ディスクI/O削減',
    description: '配信と同時に録画すると負荷が高いため、配信のみの場合は無効化します。',
    steps: [
      'OBS > 設定 > 出力',
      '「録画」タブをクリック',
      '「録画を有効にする」のチェックを外す',
      '「OK」をクリック',
    ],
    estimatedTime: 30,
    imagePlaceholder: `
┌─────────────────────┐
│ 出力設定            │
├─────────────────────┤
│ [配信] [録画]       │ ← 録画タブ
│                     │
│ ☐ 録画を有効にする  │ ← チェックを外す
└─────────────────────┘
    `,
  },

  // === その他の最適化 ===
  {
    id: 'output-mode',
    title: '出力モードの確認',
    category: 'performance-mid',
    priority: 3,
    impact: 'medium',
    impactDescription: 'エンコーダ設定の最適化',
    description: '初心者は「シンプル」モード推奨。詳細制御したい場合は「詳細」を選択。',
    steps: [
      'OBS > 設定 > 出力',
      '出力モードを「シンプル」に設定（初心者向け）',
      'または「詳細」でレート制御を「CBR」に設定（上級者向け）',
      '「OK」をクリック',
    ],
    estimatedTime: 60,
  },
  {
    id: 'windows-game-mode',
    title: 'Windowsゲームモードの有効化',
    category: 'performance-mid',
    priority: 3,
    impact: 'medium',
    impactDescription: 'FPS +5-10%',
    description: 'WindowsのゲームモードをONにすると、ゲームとOBSのパフォーマンスが向上します。',
    steps: [
      'Windowsキーを押して「設定」を開く',
      '「ゲーム」をクリック',
      '「ゲームモード」をONにする',
    ],
    estimatedTime: 30,
  },
  {
    id: 'browser-hw-accel',
    title: 'ブラウザソースのハードウェアアクセラレーション',
    category: 'optional',
    priority: 1,
    impact: 'low',
    impactDescription: 'ブラウザソース使用時のみ効果',
    description: 'アラートやチャット画面などでブラウザソースを使う場合に有効化します。',
    steps: [
      'OBS > 設定 > 詳細設定',
      '「ブラウザのハードウェアアクセラレーションを有効にする」をON',
      '「OK」をクリック',
      'OBSを再起動',
    ],
    estimatedTime: 45,
  },
  {
    id: 'audio-monitoring',
    title: '音声モニタリングの設定',
    category: 'optional',
    priority: 3,
    impact: 'low',
    impactDescription: 'レイテンシー +わずか',
    description: '自分の声が配信に乗っているか、ヘッドホンで確認できるようにします。',
    steps: [
      'OBSメイン画面の音声ミキサーで歯車アイコンをクリック',
      '「オーディオの詳細プロパティ」を開く',
      'マイクの「音声モニタリング」を「モニターと出力」に設定',
      '「閉じる」をクリック',
    ],
    estimatedTime: 45,
  },
];
```

---

## 🚀 実装方針

### Phase 1: 基本構造（必須設定のみ）
1. 完了画面に「必須設定ガイドを見る」ボタンを追加
2. 必須3項目のガイド画面を実装
3. テキスト手順のみ表示（画像はPlaceholder）

### Phase 2: パフォーマンス設定追加
1. パフォーマンス設定画面を追加
2. チェックボックスで選択可能に
3. 影響度の視覚化（🔴🟡🟢）

### Phase 3: 詳細設定追加
1. その他の最適化項目を追加
2. スキップ可能にする

### Phase 4: 画像対応
1. スクリーンショット撮影
2. 画像URLを設定
3. 画像表示モードを実装

---

## 📁 ファイル構成

```
components/
├── post-download/
│   ├── guide-complete.tsx         # 完了画面（拡張版）
│   ├── guide-required.tsx         # 必須設定ガイド
│   ├── guide-performance.tsx      # パフォーマンス設定ガイド
│   ├── guide-optional.tsx         # 詳細設定ガイド
│   └── guide-item.tsx             # ガイド項目コンポーネント

lib/
├── post-download-guide.ts         # ガイドデータ定義
└── types.ts                       # 型定義追加

data/
└── guide-images/                  # 画像格納（将来）
    ├── youtube-stream-key.png
    ├── microphone-setup.png
    └── ...
```

---

## 🎯 実装優先度

| Phase | 内容 | 優先度 | 工数見積 |
|-------|------|--------|----------|
| Phase 1 | 必須設定ガイド（3項目） | 高 | 4-6h |
| Phase 2 | パフォーマンス設定（3項目） | 高 | 3-4h |
| Phase 3 | 詳細設定（4項目） | 中 | 2-3h |
| Phase 4 | 画像対応 | 低 | 2-3h |

**合計見積:** 11-16時間

---

## 📝 メモ

- 画像は後から追加可能（Placeholder対応）
- 初心者向けなので、専門用語は避ける
- 各手順は5ステップ以内に収める
- 影響度は視覚的に分かりやすく（絵文字使用）
- 完了チェック機能で達成感を演出

---

**作成者:** Claude Sonnet 4.5
**最終更新:** 2026-02-12
